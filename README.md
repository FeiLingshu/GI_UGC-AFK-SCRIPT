# __GI_UGC-AFK-SCRIPT__

> __名字懒得想了，就这样吧，谁叫GitHub仓库名称只用英文:p__

<a id="gt"></a>

- __脚本基于 [`BetterGI`](https://github.com/babalae/better-genshin-impact) 编写__
- __使用 `GUID=**********` 关卡进行自动刷取奇域经验__
    - __由于大量速刷关卡疑似遭清算，不再强制提供特定关卡，我在下方维护了一个可用关卡列表（不定时维护，存在丢失时效性可能），同时[我也制作了一个可以用于速刷的关卡](#my)，使用了一些技术手段规避千星奇域检测__
    - __现在已支持使用其他关卡运行脚本，具体配置方式[前往这里](#imgX)查看__
    - __请严格遵守[脚本运行时间线](#tl)限制__
    - __关卡游玩过程中不能存在任何交互__

> __关卡的'平均时长'面板（即ETA）似乎与实际游玩时长没有关联，据测试，列表中所有关卡的单次循环时长几乎相同__  
> __列表更新日期：`2025.11.21`，请务必不要组队游玩速刷关卡__

|__关卡GUID__|__面板ETA__|__人数限制__|
|:-:|:-:|:-:|
|__7016448561__|__2min__|__1__|
|__7019038454__|__2min__|__1__|
|__7162568398__|__2min__|__1__|
|__11311530499__|__3min__|__8__|
|__11338661668__|__2min__|__8__|
|__15815416007__|__2min__|__8__|

<a id="my"></a>

> [!TIP]
> __作者自行构建了一个可以用于速刷的千星奇域关卡__
> - [x] __关卡需通过特殊操作才可执行速刷逻辑，用于规避千星奇域审查__
> - __关卡GUID：`7017756273`__
> - __关卡人数限制：`8`__
> - __启用速刷功能需要满足以下条件__
>     - __单人游玩__
>     - __玩家位于房间的 `8` 号位中__
>     - __此时进入关卡后将立即结算__
> - __其余情况下，关卡表现将与普通关卡无异__
> - [x] 由于关卡具有完整的玩家检测逻辑，即使进行了联机游玩也不会触发快速结算，非常安全

> [!NOTE]
> __功能已回归！__
> - __~~由于国内对GitHub的访问极其不稳定，BetterGI进行网络请求时无法使用代理，其超时时间过长且无法进行调整，自动检查更新的功能在发布前就已经移除~~__
> - __~~使用国内镜像站点 [`hub.gitmirror.com`](https://hub.gitmirror.com/) 进行代理，获取更新数据~~__
> - __脚本会在运行开始时尝试检查更新，并在BetterGI遮罩窗口上显示相关信息__
> - __更新并非强制的，可以选择不进行更新，即使检查更新失败脚本也会正常运行__
> - __*望周知：作者本人无法确保镜像站点的安全性，存在由于DNS污染导致http请求被发送至存在安全风险的站点的情况，且BetterGI没有提供网络请求相关的安全性设置（如强制启用https、启用安全检查等等），如在意安全性，可以不进行[JS脚本权限配置](#BGI)*__

> [!CAUTION]
> - __`2025.12.28` 镜像站点 `hub.gitmirror.com` 访问返回代码 `522` ，额外添加镜像站点 [`gh-proxy.com`](https://gh-proxy.com/) 作为备份服务__
> - __`2026.1.8` 镜像站点 `hub.gitmirror.com` 已无法通过 `DNS` 获取到 `IP` 地址，主服务已转移至 [`Gitee`](https://gitee.com/) ，由作者手动更新标志文件（苦了谁也不能苦了自动化代码）__
> - ___由于 `BetterGI` 内部未提供 `AbortController` 方法，无法实现取消正在进行的 `http` 请求，程序内置了等待 `http` 请求完成的安全退出模块，请不要在启动脚本后短时间内（最长约30s）手动终止脚本，否则 `BetterGI` 使用的 `.NET` 框架将会弹出错误窗口（不影响正常使用）___

> __以下为「 自动检查更新 」所需设置__

<a id="BGI"></a>

- __如图所示，将本JS脚本的HTTP权限设置为启用__
- __设置为关闭可禁用更新检查__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/BGI.png)

### __使用教程__

> [!NOTE]
>> __脚本开发时使用的BetterGI版本：[0.53.0](https://github.com/babalae/better-genshin-impact/releases/tag/0.53.0)__
>> - __不必使用相同版本，该提示信息仅提示'新版本BetterGI可能出现特性改变导致脚本某些语句运行异常'的情况__
>> - __为了维持运行稳定，脚本无法在更旧的版本上运行，开发时使用的BetterGI版本将随每次更新实时更新__
>> 
>> __脚本开发时使用的BetterGI配置（OCR）：__
>> - __模型：Paddle__  
>> - __版本：V5Auto__
>>
>> __相关配置可以在'设置-其他设置-OCR配置'中找到__
> 
> __请在开始前先设置BetterGI快捷键，防止无法停止脚本__
> - __启动停止 BetterGI__
> - __停止当前脚本/独立任务__
>
> __推荐自己创建一个大厅/找一个没人的大厅，其他玩家头顶的昵称文本可能会影响OCR识别__

> __以下为「 原神 」部分教程__

<a id="img1"></a>
  
- __找到所需关卡，并点击右上角的「 创建房间 」按钮__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/1.png)

<a id="img2"></a>

- __移动至准备区，确认关卡中只有1位玩家，然后点击右上角「 收起 」按钮__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/2.png)

<a id="img3"></a>

- __最终在该界面时即可使用「 BetterGI 」运行脚本__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/3.png)

> __以下为「 BetterGI 」部分教程__

- __在「 全自动 」-「 JS 脚本 」选项卡中，点击「 打开脚本目录 」按钮__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/4.png)

- __下载并在打开的文件夹中解压脚本文件（3个脚本文件应处于文件夹中，文件夹名称随意，请确认文件结构和图中相同，README文档和LICENSE文档为非必要文件，不影响脚本执行）__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/5.png)

- __在「 全自动 」-「 调度器 」选项卡中，点击「 新增配置组 」按钮，添加一个任意名称的配置组__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/6.png)

- __点击刚刚创建的配置组标签，并选择「 添加 」-「 JS脚本 」，添加刚刚解压的JS脚本__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/7.png)

<a id="imgX"></a>

- __右键点击刚刚添加的JS脚本，选择「 修改JS脚本自定义配置 」，并设置两个游戏内快捷键的按键（进入房间按键可在「 [原神教程#3](#img3)图中右侧"房间"部分 」找到）（开始游戏按键可在「 [原神教程#2](#img2)图中右下角找到 」）__
> [!IMPORTANT]
> __由于出现了目标关卡被下架的情况，现增加了额外的解决方案：__
> - __推荐的[目标关卡](#gt)已更换__
> - __添加了两个额外的配置项：__
>     - __关卡名称（必填，用于首次循环前的OCR识别）（可在[原神教程#1](#img1)图中的关卡详情页找到，对应标题文本）__
>         - __如关卡名称存在标点符号，可以选择其中一部分填入（如：GUID为7015097904的关卡名称为'0秒结算，速刷专用'，填入配置项时可以仅填写'速刷专用'，以避免出现可能的OCR识别错误）__
>     - __关卡人数限制（必填，用于首次循环前的OCR识别）（可在[原神教程#1](#img1)图中的关卡详情页找到，对应左侧列表中的'组队匹配上限'条目）__
>
> __由于出现了目标关卡名称被重置的情况，现增加了额外的解决方案：__
> - __添加了一个额外的配置项：__
>     - __关卡GUID（必填，用于首次循环前的OCR识别）（可在[原神教程#1](#img1)图中的关卡详情页找到，对应关卡GUID）__
> - __修改了一个已知的配置项：__
>     - __关卡名称（选填，用于首次循环前的OCR识别）（可在[原神教程#1](#img1)图中的关卡详情页找到，对应标题文本）__
>         - __千星奇域重置关卡名称后，其会变成包含关卡GUID的字符串，当关卡名称被重置后，可将关卡名称配置留空（不留空也不会影响脚本正确执行）__
>         - __如后续关卡作者重新设置了关卡名称，必须同步更新关卡名称配置，否则会造成脚本执行出现错误__
>
> __作者自行添加了一个新功能：__
> - __添加了一个额外的配置项：__
>     - __脚本执行次数限制（选填），用于在执行指定次数循环后自动终止__
>     - __留空或设置为0即可无限制执行__
>     - __在使用[作者自行构建的关卡](#my)时，一次可以获取20奇域经验，每次升级共需1000经验，每周经验上限为4000__
>     - __上述数据未经多次验证，可能存在错误__
>
> __已更新[脚本所需时间线](#tl)__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/X.png)

- __运行脚本前，需手动启动BetterGI（重要！！！），也可以通过快捷键启动（如果不手动启动直接运行脚本，会由于BetterGI自动启动策略进入原神主界面检查，而目前BetterGI没有针对千星奇域做适配，所以该过程会卡住）__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/Z.png)

- __在配置组对应项目的选项卡右侧部分点击「 运行 」即可开始脚本执行（*：请尽量避免点击左侧连续执行，否则可能会由于BetterGI暂时无法识别千星奇域的主界面而卡住）__

![](https://raw.githubusercontent.com/FeiLingshu/GI_UGC-AFK-SCRIPT/refs/heads/resources/8.png)

<a id="tl"></a>

> [!IMPORTANT]
> __脚本运行中时间间隔为固定值，游戏运行过慢可能导致出现异常__
> __请先确认：__
> - __首次从主界面进入关卡房间的过程，耗时不超过5s__
> - __开始游戏后，在关卡内耗时不超过60s__
> - __关卡结束后点击返回大厅按钮开始，至返回主界面并再次打开关卡房间后，耗时不超过10s__
>
> ___务必在使用脚本前确认以上项目___
